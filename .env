RIO_ENGINE_BASE_DIR=.

## App
APP_NAME=rio-engine
ORG_NAME=Lepton
DOCKER_SOCKET_LOCATION=/var/run/docker.sock
DOCKER_NETWORK=lepton
APP_URL=http://192.168.2.75

########################
# Supabase Postgres
########################

POSTGRES_CONTAINER_NAME=$APP_NAME-db
POSTGRES_IMAGE=supabase/postgres:15.8.1.054
POSTGRES_CONFIG_DIR=$RIO_ENGINE_BASE_DIR/config/db
POSTGRES_DATA_DIR=$RIO_ENGINE_BASE_DIR/data/db
POSTGRES_HOST=$POSTGRES_CONTAINER_NAME
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgres://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$POSTGRES_DB

########################
# Traefik
########################

TRAEFIK_CONTAINER_NAME=$APP_NAME-traefik
TRAEFIK_IMAGE=traefik:v3.2.1
TRAEFIK_BASE_DIR=/opt/traefik
TRAEFIK_HTTP_PORT=80
TRAEFIK_HTTPS_PORT=443
TRAEFIK_ADMIN_PORT=8080

########################
# Airflow 
########################

AIRFLOW_IMAGE=leptonworld/airflow_2.10.5-gdal_3.9.3
AIRFLOW_UID=1000

## Postgres
AIRFLOW_POSTGRES_IMAGE=postgres:13
AIRFLOW_POSTGRES_DB=airflow
AIRFLOW_POSTGRES_CONTAINER_NAME=$APP_NAME-airflow-postgres
AIRFLOW_POSTGRES_USER=airflow
AIRFLOW_POSTGRES_PASSWORD=airflow
AIRFLOW_POSTGRES_HOST=$AIRFLOW_POSTGRES_CONTAINER_NAME
AIRFLOW_POSTGRES_PORT=5432
AIRFLOW_POSTGRES_DATA_DIR=$RIO_ENGINE_BASE_DIR/data/airflow-postgres

## Redis
AIRFLOW_REDIS_IMAGE=redis:7.2-bookworm
AIRFLOW_REDIS_CONTAINER_NAME=$APP_NAME-redis
AIRFLOW_REDIS_PORT=6379
AIRFLOW_REDIS_HOST=$AIRFLOW_REDIS_CONTAINER_NAME

## Webserver
AIRFLOW_WEBSERVER_PORT=7777
AIRFLOW_WEBSERVER_CONTAINER_NAME=$APP_NAME-airflow-webserver
AIRFLOW_WEBSERVER_HOST=$AIRFLOW_WEBSERVER_CONTAINER_NAME

# Worker
AIRFLOW_WORKER_CONTAINER_NAME=$APP_NAME-airflow-worker

## Scheduler
AIRFLOW_SCHEDULER_CONTAINER_NAME=$APP_NAME-airflow-scheduler

## Triggerer
AIRFLOW_TRIGGERER_CONTAINER_NAME=$APP_NAME-airflow-triggerer

## Airflow URLs
AIRFLOW_URL=$APP_URL:$AIRFLOW_WEBSERVER_PORT
AIRFLOW_DB_API_URL=$APP_URL:8006
AIRFLOW_API_URL=$APP_URL:8007



############
# Secrets
# YOU MUST CHANGE THESE BEFORE GOING INTO PRODUCTION
############

JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q
SECRET_KEY_BASE=UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq
VAULT_ENC_KEY=your-encryption-key-32-chars-min


############
# Supavisor -- Database pooler
############
POOLER_PROXY_PORT_TRANSACTION=6543
POOLER_DEFAULT_POOL_SIZE=20
POOLER_MAX_CLIENT_CONN=100
POOLER_TENANT_ID=rio-engine


############
# API Proxy - Configuration for the Kong Reverse proxy.
############

KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

SECRET_KEY_BASE=UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq

############
# API - Configuration for PostgREST.
############

PGRST_DB_SCHEMAS=public,storage,graphql_public


############
# Auth - Configuration for the GoTrue authentication server.
############

## General
SITE_URL=http://localhost:3000
ADDITIONAL_REDIRECT_URLS=
JWT_EXPIRY=3600
DISABLE_SIGNUP=false
API_EXTERNAL_URL=http://localhost:8000

## Mailer Config
MAILER_URLPATHS_CONFIRMATION="/auth/v1/verify"
MAILER_URLPATHS_INVITE="/auth/v1/verify"
MAILER_URLPATHS_RECOVERY="/auth/v1/verify"
MAILER_URLPATHS_EMAIL_CHANGE="/auth/v1/verify"

## Email auth
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=false
SMTP_ADMIN_EMAIL=nikhil@rio.software
SMTP_HOST=smtp.resend.com
SMTP_PORT=487
SMTP_USER=resend
SMTP_PASS=re_SAaSASsv_H7Gg715CxP92atVo8KmNrmRf
SMTP_SENDER_NAME="Nikhil Saraf"
ENABLE_ANONYMOUS_USERS=false

## Phone auth
ENABLE_PHONE_SIGNUP=true
ENABLE_PHONE_AUTOCONFIRM=true


############
# Studio - Configuration for the Dashboard
############

STUDIO_DEFAULT_ORGANIZATION=$ORG_NAME
STUDIO_DEFAULT_PROJECT=$APP_NAME

STUDIO_USERNAME=rio
STUDIO_PASSWORD=woofwoof

STUDIO_PORT=3000
# replace if you intend to use Studio outside of localhost
SUPABASE_PUBLIC_URL=http://localhost:8000

# Enable webp support
IMGPROXY_ENABLE_WEBP_DETECTION=true

# Add your OpenAI API key to enable SQL Editor Assistant
OPENAI_API_KEY=

############
# Functions - Configuration for Functions
############
# NOTE: VERIFY_JWT applies to all functions. Per-function VERIFY_JWT is not supported yet.
FUNCTIONS_VERIFY_JWT=false

############
# Logs - Configuration for Logflare
# Please refer to https://supabase.com/docs/reference/self-hosting-analytics/introduction
############

ANALYTICS_PORT=4000
LOGFLARE_LOGGER_BACKEND_API_KEY=your-super-secret-and-long-logflare-key

# Change vector.toml sinks to reflect this change
LOGFLARE_API_KEY=your-super-secret-and-long-logflare-key

# Google Cloud Project details
GOOGLE_PROJECT_ID=GOOGLE_PROJECT_ID
GOOGLE_PROJECT_NUMBER=GOOGLE_PROJECT_NUMBER

############
# SmartMarket
############

SMART_MARKET_IMAGE=leptonworld/smart-market:main
SMART_MARKET_CONTAINER_NAME=$APP_NAME-smart-market
SMART_MARKET_HOST=$SMART_MARKET_CONTAINER_NAME
SMART_MARKET_PORT=5000
  
SMART_FLOWS_BASE_DIR=$RIO_ENGINE_BASE_DIR/flows
SMART_FLOWS_API_CONTAINER_NAME=$APP_NAME-flows-api
SMART_FLOWS_API_IMAGE=leptonworld/smart-flows-api:latest
SMART_FLOWS_POSTGREST_CONTAINER_NAME=$APP_NAME-flows-postgrest
SMART_FLOWS_POSTGREST_IMAGE=postgrest/postgrest:latest
SMART_FLOWS_POSTGREST_PORT=6000
SMART_FLOWS_DATABASE_URL=postgresql://postgres:postgres@${SMART_FLOWS_POSTGREST_CONTAINER_NAME}:${SMART_FLOWS_POSTGREST_PORT}/postgres


PUBLIC_RIO_ENGINE_URL=${APP_URL}/base/
PUBLIC_RIO_ENGINE_ANON_KEY=$ANON_KEY
PUBLIC_GOTRUE_URL=${PUBLIC_RIO_ENGINE_URL}auth/v1
PUBLIC_GOTRUE_ANON_KEY=$ANON_KEY
PUBLIC_LEPTON_MAPS_API_KEY=bb6d287de3f25f93f8024c31feffa398eb3a4a6ea3dc7e2468a03a0699c06426
PRIVATE_RIO_ENGINE_URL=http://${APP_NAME}-kong:8000/
PRIVATE_RIO_ENGINE_ANON_KEY=$ANON_KEY
PRIVATE_GOTRUE_URL=${PRIVATE_RIO_ENGINE_URL}auth/v1/
PRIVATE_GOTRUE_ANON_KEY=$ANON_KEY
PUBLIC_TURNSTILE_SITE_KEY=1x00000000000000000000AA
PRIVATE_CSP_CONNECT_SRC=$APP_URL
PRIVATE_CSP_IMAGE_SRC=$APP_URL
PUBLIC_TURNSTILE_SITE_KEY=1x00000000000000000000AA

SUPABASE_CLI_IMAGE=leptonworld/supabase-cli:2.19.7
